import{q,r as s,S as K,j as e}from"./app-Bs2T8Cel.js";import{T as V}from"./Toast-D4UZEFGK.js";import W from"./FeatureCard-lyQ1k5c1.js";import $ from"./FeatureFilterBar-lvyCDfs2.js";import z from"./FeatureFormModal-CbNUmbVY.js";import G from"./DeleteFeatureConfirmationModal-D25tAzE2.js";import{P as v}from"./plus-BORCrL2h.js";import{C as J}from"./circle-alert-Cj8kEujd.js";import"./pen-Cv134KP_.js";import"./createLucideIcon-CvzI4D8G.js";import"./trash-2-B32JthJw.js";import"./search-DK9GOSMe.js";import"./refresh-cw-HeUvamWv.js";import"./x-C6So-ddW.js";const me=()=>{const{features:c,toast:n}=q().props,[m,S]=s.useState([]),[l,f]=s.useState([]),[a,d]=s.useState(""),[k,o]=s.useState(!1),[u,h]=s.useState(null),[C,p]=s.useState(!1),[g,F]=s.useState({type:"",message:""}),[T,b]=s.useState(!1),[M,j]=s.useState(null),[D,x]=s.useState("");s.useEffect(()=>{c&&S(c)},[c]),s.useEffect(()=>{if(a){const t=m.filter(r=>r.name.toLowerCase().includes(a.toLowerCase())||r.description.toLowerCase().includes(a.toLowerCase()));f(t)}else f(m)},[m,a]),s.useEffect(()=>{if(n){F({type:n.type,message:n.message}),p(!0);const t=setTimeout(()=>{p(!1)},5e3);return()=>clearTimeout(t)}},[n]);const{data:E,setData:i,post:w,processing:L,errors:O,reset:P}=K({name:"",price:"",description:"",_method:""}),N=t=>{if(!t)return"";const r=t.toString().replace(/\D/g,"");return r===""?"":new Intl.NumberFormat("id-ID").format(r)},A=t=>t&&parseInt(t.replace(/\D/g,""),10)||0,B=t=>{const r=N(t.target.value);x(r);const U=A(r);i("price",U)},y=()=>{h(null),P(),i({name:"",price:"",description:"",_method:""}),x(""),o(!0)},H=t=>{h(t),i({name:t.name,price:t.price.toString(),description:t.description,_method:"PUT"}),x(N(t.price.toString())),o(!0)},I=t=>{t.preventDefault(),u?w(route("admin.catalogs.features.update",u.id),{onSuccess:()=>{o(!1)},onError:r=>{console.error("Update errors:",r)}}):w(route("admin.catalogs.features.store"),{onSuccess:()=>{o(!1)},onError:r=>{console.error("Create errors:",r)}})},_=t=>{j(t),b(!0)},R=()=>{b(!1),j(null)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:[C&&e.jsx(V,{type:g.type,message:g.message,onClose:()=>p(!1)}),e.jsx(G,{isOpen:T,onClose:R,feature:M}),e.jsx(z,{isOpen:k,onClose:()=>o(!1),selectedFeature:u,data:E,setData:i,errors:O,priceFormatted:D,handlePriceChange:B,processing:L,handleSubmit:I}),e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white shadow-xl rounded-2xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 p-6 md:p-8",children:[e.jsx("h1",{className:"font-cormorant text-3xl md:text-4xl font-light text-white text-center tracking-wide",children:"Manajemen Fitur Custom"}),e.jsx("p",{className:"text-center text-white/80 mt-2 max-w-2xl mx-auto",children:"Kelola fitur-fitur tambahan yang dapat ditambahkan pada paket pernikahan"})]}),e.jsx("div",{className:"p-4 md:p-6 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between space-y-4 md:space-y-0",children:[e.jsxs("button",{onClick:y,className:"w-full md:w-auto bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:[e.jsx(v,{className:"w-4 h-4 mr-2 inline-block"}),"Tambah Fitur Baru"]}),e.jsx("div",{className:"w-full md:w-auto",children:e.jsx($,{searchTerm:a,setSearchTerm:d})})]})}),a&&e.jsx("div",{className:"bg-blue-50 px-6 py-2 border-b border-blue-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-blue-600",children:[e.jsx("span",{className:"font-medium",children:"Search:"}),' "',a,'"',l.length===1?" (1 item)":` (${l.length} items)`]}),e.jsx("button",{onClick:()=>d(""),className:"text-xs text-blue-700 hover:text-blue-900",children:"Hapus filter"})]})}),e.jsx("div",{className:"p-6 md:p-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.length>0?l.map(t=>e.jsx(W,{feature:t,onEdit:H,onDelete:_},t.id)):e.jsxs("div",{className:"col-span-1 md:col-span-2 lg:col-span-3 flex flex-col items-center justify-center bg-white rounded-lg shadow p-8",children:[e.jsx(J,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Tidak ada fitur ditemukan"}),e.jsx("p",{className:"text-gray-500 text-center mb-4",children:a?"Tidak ada fitur yang cocok dengan pencarian Anda.":"Silakan tambahkan fitur baru untuk memulai."}),e.jsxs("div",{className:"mt-6 flex justify-center space-x-3",children:[a&&e.jsxs("button",{onClick:()=>d(""),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx("svg",{className:"-ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Tampilkan Semua"]}),e.jsxs("button",{onClick:y,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:[e.jsx(v,{className:"-ml-1 mr-2 h-4 w-4"}),"Tambah Fitur Baru"]})]})]})})})]})})]})};export{me as default};
