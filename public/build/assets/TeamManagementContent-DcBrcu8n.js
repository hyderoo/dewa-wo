import{q as A,r as l,S as B,j as e}from"./app-Bj-2ttWe.js";import{T as G}from"./Toast-0AKSzmFv.js";import H from"./DeleteTeamConfirmationModal-BFk9OcLk.js";import{U as J}from"./upload-BYAEokgQ.js";import{T as K}from"./triangle-alert-BbqQ4372.js";import{X as W}from"./x-P4FUM78l.js";import{S as X}from"./save-Dex4yvPJ.js";import"./trash-2-BsVUv4IH.js";import"./createLucideIcon-Q6M-lg5u.js";import"./circle-alert-DbwOTSu0.js";const le=()=>{const{teams:k,toast:c}=A().props,N=l.useRef(null),[E,j]=l.useState(!1),[n,F]=l.useState(null),[U,p]=l.useState(!1),[y,v]=l.useState({type:"",message:""}),[w,h]=l.useState(null),[T,u]=l.useState(!1),[L,_]=l.useState(!1),[q,M]=l.useState(null),{data:a,setData:g,post:S,processing:C,errors:i,reset:P,clearErrors:D,setError:m}=B({name:"",role:"",description:"",image:null,_image:"",instagram:"",linkedin:"",is_highlighted:!1,_method:"PUT"});l.useEffect(()=>{if(c){v({type:c.type,message:c.message}),c.type==="success"&&(j(!1),P(),h(null)),u(!1),p(!0);const s=setTimeout(()=>{p(!1)},5e3);return()=>clearTimeout(s)}},[c]);const d=s=>{const{name:o,value:t,type:x,checked:r,files:b}=s.target;if(x==="file"){if(b&&b.length>0){const f=b[0];if(!["image/jpeg","image/png","image/gif","image/jpg"].includes(f.type)){m("image","Please select a valid image file (JPEG, PNG, GIF)");return}if(f.size>2*1024*1024){m("image","Image size should be less than 2MB");return}D("image"),g("image",f);const O=URL.createObjectURL(f);h(O)}}else x==="checkbox"?g(o,r):g(o,t)},I=(s=null)=>{F(s),D(),s?(g({name:s.name,role:s.role,description:s.description,image:null,_image:s.image||"/tim.jpg",instagram:s.instagram||"",linkedin:s.linkedin||"",is_highlighted:s.is_highlighted||!1,_method:"PUT"}),h(s.image)):(P(),g({name:"",role:"",description:"",image:null,_image:"",instagram:"",linkedin:"",is_highlighted:!1,_method:""}),h(null)),j(!0)},R=s=>{s.preventDefault();let o=!1;if(a.name.trim()||(m("name","Name is required"),o=!0),a.role.trim()||(m("role","Role is required"),o=!0),a.description.trim()||(m("description","Description is required"),o=!0),!n&&!a.image&&(m("image","Image is required for new team members"),o=!0),o)return;const t=new FormData;t.append("name",a.name),t.append("role",a.role),t.append("description",a.description),t.append("instagram",a.instagram||""),t.append("linkedin",a.linkedin||""),t.append("is_highlighted",a.is_highlighted?"1":"0"),a.image instanceof File&&(console.log("Appending image file to form data:",a.image.name),t.append("image",a.image)),n&&t.append("_method","PUT"),console.log("Form data entries:");for(let r of t.entries())console.log(r[0]+": "+(r[1]instanceof File?r[1].name:r[1]));u(!0);const x={preserveState:!1,preserveScroll:!0,forceFormData:!0,onSuccess:()=>{u(!1)},onError:r=>{u(!1),console.error("Form submission errors:",r),r.image&&(v({type:"error",message:r.image}),p(!0))}};S(n?route("admin.teams.update",n.id):route("admin.teams.store"),t,x)},$=s=>{M(s),_(!0)},z=()=>{_(!1),M(null)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 text-gray-600",children:[U&&e.jsx(G,{type:y.type,message:y.message,onClose:()=>p(!1)}),e.jsx(H,{isOpen:L,onClose:z,teamMember:q}),e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white shadow-xl rounded-2xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-rose-500 p-6 md:p-8",children:[e.jsx("h1",{className:"font-cormorant text-3xl md:text-4xl font-light text-white text-center tracking-wide",children:"Manajemen Tim Profesional"}),e.jsx("p",{className:"text-center text-white/80 mt-2 max-w-2xl mx-auto",children:"Kelola informasi dan struktur tim Anda dengan efisien dan profesional"})]}),e.jsx("div",{className:"p-4 md:p-6 bg-gray-50 border-b border-gray-200",children:e.jsx("button",{onClick:()=>I(),className:"w-full md:w-auto bg-pink-600 text-white px-6 py-3 rounded-lg hover:bg-pink-700 transition-colors focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2",children:"+ Tambah Anggota Tim"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6 md:p-8",children:k&&k.map(s=>e.jsx("div",{className:`bg-white border ${s.is_highlighted?"border-pink-500 ring-2 ring-pink-300":"border-gray-200"} rounded-xl shadow-md hover:shadow-lg transition-shadow overflow-hidden`,children:e.jsxs("div",{className:"p-6",children:[s.is_highlighted&&e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"bg-pink-100 text-pink-800 text-xs font-medium px-2.5 py-0.5 rounded",children:"Highlighted Team Member"})}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("img",{src:s.image,alt:s.name,className:`w-16 h-16 rounded-full object-cover mr-4 border-2 ${s.is_highlighted?"border-pink-500":"border-pink-100"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.role})]})]}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:s.description}),e.jsxs("div",{className:"flex justify-between items-center border-t border-gray-100 pt-4",children:[e.jsxs("div",{className:"flex space-x-3",children:[s.instagram&&e.jsx("a",{href:s.instagram,target:"_blank",rel:"noopener noreferrer",className:"text-pink-600 hover:text-pink-800 transition-colors",children:"Instagram"}),s.linkedin&&e.jsx("a",{href:s.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-pink-600 hover:text-pink-800 transition-colors",children:"LinkedIn"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>I(s),className:"text-blue-500 hover:text-blue-700 text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>$(s),className:"text-red-500 hover:text-red-700 text-sm",children:"Hapus"})]})]})]})},s.id))})]})}),E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md flex flex-col max-h-[90vh]",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 sticky top-0 bg-white rounded-t-xl z-10",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:n?"Edit Anggota Tim":"Tambah Anggota Tim Baru"})}),e.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:e.jsxs("form",{id:"teamForm",onSubmit:R,encType:"multipart/form-data",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nama Lengkap ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:d,className:`w-full px-3 py-2 border ${i.name?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500`,placeholder:"Masukkan nama lengkap"}),i.name&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:i.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Posisi/Jabatan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"role",value:a.role,onChange:d,className:`w-full px-3 py-2 border ${i.role?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500`,placeholder:"Masukkan posisi"}),i.role&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:i.role})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Deskripsi ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{name:"description",value:a.description,onChange:d,className:`w-full px-3 py-2 border ${i.description?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500`,rows:"4",placeholder:"Tuliskan deskripsi singkat"}),i.description&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:i.description})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx("span",{children:"Profile Photo"}),e.jsx("span",{className:"ml-2 text-red-500 text-xs font-normal",children:n?"(Optional)":"*Required"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-24 h-24 border-2 border-dashed ${i.image?"border-red-400 bg-red-50":"border-gray-300"} rounded-full flex items-center justify-center overflow-hidden`,children:w?e.jsx("img",{src:w,alt:"Preview",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),!n&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Required"})]})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("input",{type:"file",name:"image",id:"image-upload",ref:N,accept:"image/jpeg,image/png,image/gif,image/jpg",onChange:d,className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>N.current.click(),className:"px-4 py-2 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-pink-500 inline-flex items-center",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Browse Image"]}),a.image instanceof File&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Selected: ",a.image.name]}),!n&&!a.image&&e.jsxs("p",{className:"text-xs text-red-500",children:[e.jsx(K,{className:"w-3 h-3 inline mr-1"}),"Image is required for new team members"]})]})]}),i.image&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:i.image})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link Instagram"}),e.jsx("input",{type:"url",name:"instagram",value:a.instagram,onChange:d,className:`w-full px-3 py-2 border ${i.instagram?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500`,placeholder:"https://instagram.com/username"}),i.instagram&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:i.instagram})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link LinkedIn"}),e.jsx("input",{type:"url",name:"linkedin",value:a.linkedin,onChange:d,className:`w-full px-3 py-2 border ${i.linkedin?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500`,placeholder:"https://linkedin.com/in/username"}),i.linkedin&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:i.linkedin})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_highlighted",name:"is_highlighted",checked:a.is_highlighted,onChange:d,className:"h-4 w-4 text-pink-600 focus:ring-pink-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_highlighted",className:"ml-2 block text-sm text-gray-700",children:"Highlight this team member (will remove highlight from others)"})]})]})}),e.jsx("div",{className:"p-6 border-t border-gray-200 sticky bottom-0 bg-white rounded-b-xl z-10",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md inline-flex items-center",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Batalkan"]}),e.jsxs("button",{type:"submit",form:"teamForm",disabled:C||T||!n&&!a.image,className:"px-6 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 disabled:opacity-70 disabled:cursor-not-allowed inline-flex items-center",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),T?"Uploading...":C?"Processing...":n?"Update":"Tambah"]})]})})]})})]})};export{le as default};
