import{q as E,r as n,S as C,j as e,a as I,J as k}from"./app-Bs2T8Cel.js";import{B as U}from"./BaseLayout-B_SKP1-R.js";import z from"./OrderStatusBadge-BRETehLt.js";import K from"./DetailedOrderModal-DbPQFJLT.js";import{C as H}from"./calendar-fqGNGd38.js";import{M as J}from"./map-pin-cPrklkFS.js";import{U as V}from"./users-BnbK67uW.js";import{C as W}from"./circle-check-big-CyiEMgwB.js";import{S}from"./star-CUSJV_Pf.js";import{T as q}from"./triangle-alert-DF30lgZj.js";import"./createLucideIcon-CvzI4D8G.js";const Y=({show:m,onClose:r,order:a})=>{const[u,x]=n.useState(0),[o,d]=n.useState(0),{data:t,setData:c,post:p,processing:g,errors:h}=C({order_id:a==null?void 0:a.id,rating:0,comment:""});n.useEffect(()=>{m&&(x(0),c({order_id:a==null?void 0:a.id,rating:0,comment:""}))},[m,a]);const f=i=>{i.preventDefault(),p(route("orders.review",a==null?void 0:a.id),{onSuccess:()=>{r(!0)}})},b=()=>{const i=[];for(let l=1;l<=5;l++)i.push(e.jsx(S,{className:`h-8 w-8 cursor-pointer ${l<=(o||t.rating)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`,onMouseEnter:()=>d(l),onMouseLeave:()=>d(0),onClick:()=>{x(l),c("rating",l)}},l));return i};return m?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>r(!1)}),e.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[e.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:e.jsxs("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500",onClick:()=>r(!1),children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})}),e.jsx("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full",children:[e.jsx("h3",{className:"text-xl font-semibold leading-6 text-gray-900",children:"Berikan Ulasan"}),e.jsx("div",{className:"mt-6",children:e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Berikan Penilaian"}),e.jsx("div",{className:"flex space-x-2 items-center",children:b()}),h.rating&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.rating})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"comment",className:"block text-gray-700 font-medium mb-2",children:"Komentar"}),e.jsx("textarea",{id:"comment",rows:"4",value:t.comment,onChange:i=>c("comment",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Bagikan pengalaman Anda bekerja dengan kami..."}),h.comment&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.comment})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",onClick:()=>r(!1),children:"Batal"}),e.jsx("button",{type:"submit",disabled:g||t.rating===0,className:"px-4 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Mengirim...":"Kirim Ulasan"})]})]})})]})})})]})]})}):null},G=({show:m,onClose:r,onConfirm:a,title:u,message:x,confirmLabel:o,isProcessing:d})=>m?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>r()}),e.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[e.jsx("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-yellow-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(q,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:u}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-500",children:x})})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[e.jsx("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:ml-3 sm:w-auto disabled:opacity-50",onClick:a,disabled:d,children:d?"Memproses...":o}),e.jsx("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:r,children:"Batalkan"})]})]})]})}):null,me=()=>{const{orders:m,auth:r,completedOrders:a,cancelledOrders:u=[],active:x="ongoing"}=E().props,[o,d]=n.useState(null),[t,c]=n.useState(x),[p,g]=n.useState([]),[h,f]=n.useState(!1),[b,i]=n.useState(!1),[l,y]=n.useState(null),[j,D]=n.useState(null),{post:_,processing:P}=C({});n.useEffect(()=>{g(t==="ongoing"?m||[]:t==="completed"?a||[]:u||[])},[t,m,a,u]);const B=s=>{if(!s)return"-";const $=new Date(s);return new Intl.DateTimeFormat("id-ID",{day:"numeric",month:"long",year:"numeric"}).format($)},v=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),O=s=>{d(s)},M=()=>{d(null)},w=s=>{window.location.href=route("payment.detail",s)},N=s=>{window.location.href=route("orders.cancel.form",s)},R=s=>{y(s),f(!0)},L=s=>{f(!1),s&&window.location.reload()},T=s=>{D(s),i(!0)},A=()=>{i(!1)},F=()=>{_(route("orders.complete",j.id),{onSuccess:()=>{i(!1),y(j),f(!0)}})};return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:t==="ongoing"?"Pesanan Berlangsung":t==="completed"?"Pesanan Selesai":"Pesanan Dibatalkan"}),e.jsxs(U,{auth:r,children:[e.jsx("div",{className:"py-12 bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>c("ongoing"),className:`${t==="ongoing"?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Pesanan Berlangsung"}),e.jsx("button",{onClick:()=>c("completed"),className:`${t==="completed"?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Pesanan Selesai"}),e.jsx("button",{onClick:()=>c("cancelled"),className:`${t==="cancelled"?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Pesanan Dibatalkan"})]})}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-6",children:t==="ongoing"?"Pesanan Berlangsung":t==="completed"?"Pesanan Selesai":"Pesanan Dibatalkan"}),p&&p.length>0?e.jsx("div",{className:"space-y-6",children:p.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-1",children:s.client_name}),e.jsx("p",{className:"text-gray-600",children:s.catalog?s.catalog.name:"Custom Package"}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(z,{status:s.status}),s.order_number&&e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["Order #",s.order_number]})]})]}),e.jsxs("div",{className:"text-right mt-2 md:mt-0",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.formatted_price||v(s.price)}),!s.is_fully_paid&&e.jsxs("p",{className:"text-sm text-red-600",children:["Sisa: ",v(s.remaining_amount)]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(H,{className:"h-4 w-4 mr-1 text-gray-500"}),e.jsx("span",{children:B(s.event_date)})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(J,{className:"h-4 w-4 mr-1 text-gray-500"}),e.jsx("span",{children:s.venue||s.event_location||"Lokasi belum ditentukan"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(V,{className:"h-4 w-4 mr-1 text-gray-500"}),e.jsxs("span",{children:[s.estimated_guests||"-"," tamu"]})]})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-2 justify-end",children:[t==="ongoing"&&e.jsxs(e.Fragment,{children:[!s.is_fully_paid&&e.jsx("button",{onClick:()=>w(s.id),className:"px-4 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 text-sm font-medium",children:"Lakukan Pembayaran"}),s.status==="ongoing"&&s.is_fully_paid&&e.jsxs("button",{onClick:()=>T(s),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm font-medium flex items-center",children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),"Selesaikan Pesanan"]}),e.jsx(k,{href:route("payment.history",s.id),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm font-medium",children:"Riwayat Pembayaran"}),s.status==="pending_payment"&&e.jsx("button",{onClick:()=>N(s.id),className:"px-4 py-2 border border-red-300 text-red-700 rounded-md hover:bg-red-50 text-sm font-medium",children:"Batalkan"})]}),t==="completed"&&!s.has_reviewed&&e.jsxs("button",{onClick:()=>R(s),className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 text-sm font-medium flex items-center",children:[e.jsx(S,{className:"h-4 w-4 mr-1"}),"Berikan Ulasan"]}),e.jsx("button",{onClick:()=>O(s),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 text-sm font-medium",children:"Detail Pesanan"})]})]}),!s.is_fully_paid&&t==="ongoing"&&e.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Pembayaran"}),e.jsx("span",{className:"font-medium",children:s.paid_amount?`${Math.round(s.paid_amount/s.price*100)}%`:"0%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-pink-600 h-2.5 rounded-full",style:{width:`${s.paid_amount?Math.min(Math.round(s.paid_amount/s.price*100),100):0}%`}})})]})]},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400",children:e.jsx("svg",{className:"h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:t==="ongoing"?"Tidak ada pesanan berlangsung":"Tidak ada pesanan selesai"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t==="ongoing"?"Anda belum memiliki pesanan yang sedang berlangsung.":"Anda belum memiliki pesanan yang telah selesai."}),e.jsx("div",{className:"mt-6",children:e.jsx(k,{href:route("features"),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Lihat Katalog Layanan"})})]})]})})})}),o&&e.jsx(K,{order:o,onClose:M,onPayment:()=>w(o.id),onCancel:()=>N(o.id)}),e.jsx(G,{show:b,onClose:A,onConfirm:F,title:"Selesaikan Pesanan",message:"Apakah Anda yakin ingin menyelesaikan pesanan ini? Setelah diselesaikan, Anda akan diminta untuk memberikan ulasan.",confirmLabel:"Ya, Selesaikan",isProcessing:P}),l&&e.jsx(Y,{show:h,onClose:L,order:l})]})]})};export{me as default};
