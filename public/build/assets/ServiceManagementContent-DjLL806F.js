import{q as J,r,S as Q,j as s,f as V}from"./app-Bj-2ttWe.js";import{T as W}from"./Toast-0AKSzmFv.js";import X from"./DeleteServiceConfirmationModal-DqUULwM8.js";import Y from"./ServiceFilterBar-Bg0RNhdU.js";import Z from"./ServiceFilterStatusBar-DE8TSRHy.js";import $ from"./ServiceFormModal-Bp6tuuBB.js";import ee from"./ServiceListByType-Dm2_go2T.js";import te from"./EmptyServices-C-NhxVsP.js";import{C as se}from"./circle-plus-BTzkBTnu.js";import"./trash-2-BsVUv4IH.js";import"./createLucideIcon-Q6M-lg5u.js";import"./circle-alert-DbwOTSu0.js";import"./funnel-D9_HO87W.js";import"./refresh-cw-BcE-aV5D.js";import"./IconSelector-CQSY5dF2.js";import"./star-IVzQzElw.js";import"./utensils-FfSiw_7r.js";import"./image-B3SenHd_.js";import"./heart-CfuSkYvI.js";import"./calendar-B2PhcqWp.js";import"./map-pin-C7XS4VMC.js";import"./users-Dpajf5mq.js";import"./ServiceFeaturesList-D-3ZgzWM.js";import"./x-P4FUM78l.js";import"./plus-C9N-fGdW.js";import"./save-Dex4yvPJ.js";import"./ServiceCard-D5K8oIag.js";import"./eye-BR07TQjy.js";import"./circle-x-BZ6o9ve8.js";import"./pen-0WvtQCWi.js";const Ie=()=>{const{services:u,toast:c}=J().props,[k,x]=r.useState(!1),[g,C]=r.useState(null),[E,m]=r.useState(!1),[S,v]=r.useState({type:"",message:""}),[p,i]=r.useState([""]),[D,j]=r.useState("premium"),[n,b]=r.useState("all"),[O,w]=r.useState(!1),[I,T]=r.useState(null),{data:a,setData:l,post:q,put:A,processing:B,errors:L,reset:F,clearErrors:_,setError:h}=Q({title:"",description:"",icon:"Star",type:"premium",features:[],is_active:!0}),d=r.useMemo(()=>u?n==="all"?u:u.filter(e=>e.type===n):[],[u,n]),M=r.useMemo(()=>d?d.reduce((e,t)=>(e[t.type]||(e[t.type]=[]),e[t.type].push(t),e),{}):{},[d]);r.useEffect(()=>{if(c){v({type:c.type,message:c.message}),c.type==="success"&&(x(!1),F(),i([""])),m(!0);const e=setTimeout(()=>{m(!1)},5e3);return()=>clearTimeout(e)}},[c]);const y=(e=null)=>{if(C(e),_(),e){const t=e.features||[];l({title:e.title,description:e.description,icon:e.icon,type:e.type,features:t,is_active:e.is_active}),j(e.type),e.type==="additional"&&t.length>0?i(t):i([""])}else F(),l({title:"",description:"",icon:"Star",type:"premium",features:[],is_active:!0}),j("premium"),i([""]);x(!0)},P=(e,t)=>{const o=[...p];o[e]=t,i(o),l("features",o.filter(f=>f.trim()!==""))},K=()=>{i([...p,""])},R=e=>{if(p.length>1){const t=[...p];t.splice(e,1),i(t),l("features",t.filter(o=>o.trim()!==""))}},U=e=>{e.preventDefault();let t=!1;if(a.title.trim()||(h("title","Title is required"),t=!0),a.description.trim()||(h("description","Description is required"),t=!0),a.type==="additional"&&(!a.features||a.features.length===0)&&(h("features","At least one feature is required for additional services"),t=!0),t)return;const o=a.features.filter(f=>f&&f.trim()!=="");l("features",o),g?A(route("admin.services.update",g.id)):q(route("admin.services.store"))},z=e=>{T(e),w(!0)},G=()=>{w(!1),T(null)},H=(e,t)=>{V.patch(route("admin.services.toggle-status",e),{onSuccess:()=>{},onError:()=>{v({type:"error",message:t?"Failed to deactivate service":"Failed to activate service"}),m(!0)}})},N=e=>{switch(e){case"premium":return"Premium Features";case"additional":return"Additional Services";case"exclusive":return"Exclusive Benefits";default:return e.charAt(0).toUpperCase()+e.slice(1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 text-gray-600",children:[E&&s.jsx(W,{type:S.type,message:S.message,onClose:()=>m(!1)}),s.jsx(X,{isOpen:O,onClose:G,service:I}),s.jsx($,{isOpen:k,onClose:()=>x(!1),editingService:g,data:a,setData:l,errors:L,processing:B,handleSubmit:U,selectedType:D,featureInputs:p,handleFeatureChange:P,addFeatureInput:K,removeFeatureInput:R}),s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"bg-white shadow-xl rounded-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-rose-500 p-6 md:p-8",children:[s.jsx("h1",{className:"font-cormorant text-3xl md:text-4xl font-light text-white text-center tracking-wide",children:"Manajemen Layanan"}),s.jsx("p",{className:"text-center text-white/80 mt-2 max-w-2xl mx-auto",children:"Kelola fitur premium, layanan tambahan, dan benefit eksklusif untuk ditampilkan di website"})]}),s.jsx("div",{className:"p-4 md:p-6 bg-gray-50 border-b border-gray-200",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between space-y-4 md:space-y-0",children:[s.jsxs("button",{onClick:()=>y(),className:"w-full md:w-auto bg-pink-600 text-white px-6 py-3 rounded-lg hover:bg-pink-700 transition-colors focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2",children:[s.jsx(se,{className:"w-4 h-4 mr-2 inline-block"}),"Tambah Layanan"]}),s.jsx(Y,{filterType:n,setFilterType:b})]})}),n!=="all"&&s.jsx(Z,{filterType:n,setFilterType:b,filteredCount:d.length,getServiceTypeLabel:N}),s.jsx("div",{className:"p-6 md:p-8",children:Object.keys(M).length>0?s.jsx("div",{className:"space-y-10",children:Object.entries(M).map(([e,t])=>s.jsx(ee,{type:e,services:t,getServiceTypeLabel:N,onEdit:y,onDelete:z,onToggleStatus:H},e))}):s.jsx(te,{onAddNew:()=>y()})})]})})]})};export{Ie as default};
