import{r as l,j as e,f as k}from"./app-Bj-2ttWe.js";import{K as P}from"./key-round-BKENG61x.js";import{E as S}from"./eye-off-eoUXuo7G.js";import{E as C}from"./eye-BR07TQjy.js";import{M as $}from"./mail-BpuO1Li0.js";import"./createLucideIcon-Q6M-lg5u.js";const M=({onConfirm:b,onCancel:o,userId:g})=>{const[d,x]=l.useState("admin"),[t,h]=l.useState(""),[r,p]=l.useState(""),[i,f]=l.useState(!1),[u,n]=l.useState(""),[c,m]=l.useState(!1),[s,w]=l.useState({length:!1,uppercase:!1,lowercase:!1,number:!1});l.useEffect(()=>{y(t)},[t]);const y=a=>{w({length:a.length>=8,uppercase:/[A-Z]/.test(a),lowercase:/[a-z]/.test(a),number:/[0-9]/.test(a)})},j=()=>{f(!i)},N=()=>{if(n(""),!t){n("Password is required");return}if(t.length<8){n("Password must be at least 8 characters");return}if(t!==r){n("Passwords do not match");return}b(t)},v=()=>{m(!0),k.post(route("admin.users.send-reset-link",g),{},{preserveScroll:!0,onSuccess:()=>{m(!1),o()},onError:()=>{n("Failed to send reset link. Please try again."),m(!1)}})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(P,{className:"w-6 h-6 text-yellow-500 mr-3"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Reset Password"})]}),e.jsxs("div",{className:"flex border-b mb-6",children:[e.jsx("button",{onClick:()=>x("admin"),className:`px-4 py-2 font-medium text-sm focus:outline-none ${d==="admin"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Admin Reset"}),e.jsx("button",{onClick:()=>x("email"),className:`px-4 py-2 font-medium text-sm focus:outline-none ${d==="email"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Email Reset Link"})]}),u&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-600 text-sm",children:u}),d==="admin"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i?"text":"password",value:t,onChange:a=>h(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700",onClick:j,children:i?e.jsx(S,{size:18}):e.jsx(C,{size:18})})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.length?"bg-green-500":"bg-gray-300"} mr-2`}),e.jsx("span",{className:`text-xs ${s.length?"text-green-500":"text-gray-500"}`,children:"At least 8 characters"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.uppercase?"bg-green-500":"bg-gray-300"} mr-2`}),e.jsx("span",{className:`text-xs ${s.uppercase?"text-green-500":"text-gray-500"}`,children:"Contains uppercase letter"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.lowercase?"bg-green-500":"bg-gray-300"} mr-2`}),e.jsx("span",{className:`text-xs ${s.lowercase?"text-green-500":"text-gray-500"}`,children:"Contains lowercase letter"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.number?"bg-green-500":"bg-gray-300"} mr-2`}),e.jsx("span",{className:`text-xs ${s.number?"text-green-500":"text-gray-500"}`,children:"Contains a number"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"Confirm New Password"}),e.jsx("input",{type:i?"text":"password",value:r,onChange:a=>p(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),r&&t!==r&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Passwords do not match"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition",children:"Cancel"}),e.jsx("button",{onClick:N,disabled:!s.length||!s.uppercase||!s.lowercase||!s.number||!r||t!==r,className:`px-4 py-2 rounded-md transition ${s.length&&s.uppercase&&s.lowercase&&s.number&&r&&t===r?"bg-yellow-500 text-white hover:bg-yellow-600":"bg-yellow-300 text-white cursor-not-allowed"}`,children:"Reset Password"})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"py-4 text-center",children:[e.jsx($,{className:"w-16 h-16 mx-auto text-blue-500 mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-800 mb-2",children:"Send Reset Link via Email"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"A password reset link will be sent to the user's email address. The user can click the link to reset their password."}),e.jsxs("div",{className:"flex justify-center space-x-3 mt-6",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition",children:"Cancel"}),e.jsx("button",{onClick:v,disabled:c,className:`px-4 py-2 rounded-md transition ${c?"bg-blue-300 text-white cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:c?"Sending...":"Send Reset Link"})]})]})})]})})})};export{M as default};
