import{q as H,r as o,S as K,j as e,a as W}from"./app-Bs2T8Cel.js";import{B as O}from"./BaseLayout-B_SKP1-R.js";import{C}from"./circle-check-big-CyiEMgwB.js";import{c as z}from"./createLucideIcon-CvzI4D8G.js";import{B as P}from"./building-BTeyIkLo.js";import{C as B}from"./chevron-up-CxTtr77t.js";import{C as S}from"./chevron-down-DXA6EQOq.js";import{C as Q}from"./copy-Cj-b3sGt.js";import{C as A}from"./credit-card-C7X7qjcX.js";import{T as X}from"./triangle-alert-DF30lgZj.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Z=z("circle",Y),ee="font-cormorant font-light",de=()=>{var _,w;const{order:s,banks:g,virtualAccounts:j,auth:M}=H().props,[t,f]=o.useState(null),[l,T]=o.useState(null),[$,y]=o.useState(!1),[D,I]=o.useState(24*60*60),[b,p]=o.useState(null),[c,L]=o.useState(s.requires_down_payment?"down_payment":"full_payment"),{data:r,setData:i,post:N,processing:v,errors:u}=K({order_id:s.id,payment_type:s.requires_down_payment?"down_payment":"full_payment",payment_method:"",bank_code:"",amount:s.requires_down_payment?s.down_payment_amount:s.remaining_amount,payment_proof:null});o.useEffect(()=>{if(c==="down_payment")i("amount",s.down_payment_amount);else if(c==="installment"){const a=Math.min(s.remaining_amount/2,s.remaining_amount);i("amount",a)}else c==="full_payment"&&i("amount",s.remaining_amount);i("payment_type",c)},[c]),o.useEffect(()=>{const a=setInterval(()=>{I(n=>n<=0?(clearInterval(a),0):n-1)},1e3);return()=>clearInterval(a)},[]);const F=a=>{const n=Math.floor(a/3600),d=Math.floor(a%3600/60),x=a%60;return`${String(n).padStart(2,"0")}:${String(d).padStart(2,"0")}:${String(x).padStart(2,"0")}`},k=a=>{t===a?(f(null),i("payment_method","")):(f(a),i("payment_method",a))},R=a=>{T(a),i("bank_code",a.code)},V=a=>{const n=a.target.files[0];if(i("payment_proof",n),n){const d=new FileReader;d.onload=x=>{p(x.target.result)},d.readAsDataURL(n)}else p(null)},q=a=>{navigator.clipboard.writeText(a),y(!0),setTimeout(()=>y(!1),2e3)},E=a=>{const n=parseFloat(a.target.value);if(isNaN(n)||n<=0){i("amount",0);return}if(n>s.remaining_amount){i("amount",s.remaining_amount);return}i("amount",n)},m=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),J=()=>{t==="transfer"?N(route("payments.store")):t==="virtual_account"&&N(route("payments.virtual_account"))},h=j.map(a=>({code:a.bank_code,name:a.name,logo:a.logo,fullName:a.name,description:a.description||`Transfer melalui Mobile Banking, Internet Banking, atau ATM ${a.name}`})),U=()=>{const a=[];return s.requires_down_payment&&!s.down_payment_paid&&a.push({id:"down_payment",name:"Uang Muka",description:`${m(s.down_payment_amount)} (${s.down_payment_percentage}%)`}),s.remaining_amount>0&&((s.paid_amount>0||!s.requires_down_payment)&&a.push({id:"installment",name:"Cicilan",description:"Bayar sebagian dari sisa pembayaran"}),a.push({id:"full_payment",name:"Pelunasan",description:`${m(s.remaining_amount)}`})),a},G=a=>{const n=j.find(x=>x.bank_code===a);if(!n)return[];const d=n.payment_instructions;return console.log(d),d.map(x=>x.instruction)};return e.jsxs(e.Fragment,{children:[e.jsx(W,{title:"Detail Pembayaran"}),e.jsx(O,{auth:M,children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 text-gray-600",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[e.jsx("a",{href:route("orders"),children:e.jsxs("button",{className:"mb-8 inline-flex items-center text-gray-600 hover:text-pink-600 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Kembali"]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-pink-600 px-6 py-4",children:e.jsx("h1",{className:`${ee} text-2xl text-white`,children:"Detail Pembayaran"})}),e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Ringkasan Pesanan"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Paket"}),e.jsx("span",{className:"font-medium",children:s.catalog?s.catalog.name:"Custom Package"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tanggal Acara"}),e.jsx("span",{children:new Date(s.event_date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Harga"}),e.jsx("span",{children:m(s.price)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Sudah Dibayar"}),e.jsx("span",{children:m(s.paid_amount)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-semibold mt-4",children:[e.jsx("span",{children:"Sisa Pembayaran"}),e.jsx("span",{className:"text-pink-600",children:m(s.remaining_amount)})]})]})]}),e.jsx("div",{className:"p-6 bg-pink-50 border-b",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"Selesaikan pembayaran dalam"}),e.jsx("p",{className:"text-2xl font-bold text-pink-600",children:F(D)})]})}),e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Jenis Pembayaran"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:U().map(a=>e.jsxs("div",{onClick:()=>L(a.id),className:`p-4 border rounded-lg cursor-pointer transition-all
                                                ${c===a.id?"border-pink-500 bg-pink-50":"border-gray-200 hover:border-pink-200 hover:bg-pink-50/30"}`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"h-5 w-5 mr-2 flex items-center justify-center",children:c===a.id?e.jsx(C,{className:"h-5 w-5 text-pink-600"}):e.jsx(Z,{className:"h-5 w-5 text-gray-300"})}),e.jsx("span",{className:"font-medium",children:a.name})]}),e.jsx("p",{className:"text-sm text-gray-600 ml-7",children:a.description})]},a.id))}),c==="installment"&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jumlah Pembayaran"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500",children:"Rp"}),e.jsx("input",{type:"number",value:r.amount,onChange:E,min:"1",max:s.remaining_amount,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"0",required:!0})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maksimal: ",m(s.remaining_amount)]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pilih Metode Pembayaran"}),e.jsxs("div",{className:"mb-4 border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`flex justify-between items-center p-4 cursor-pointer ${t==="transfer"?"bg-pink-50 border-pink-500":"bg-white hover:bg-gray-50"}`,onClick:()=>k("transfer"),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-full mr-3 ${t==="transfer"?"bg-pink-100 text-pink-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(P,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Transfer Bank"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Transfer manual melalui bank, perlu verifikasi admin"})]})]}),t==="transfer"?e.jsx(B,{className:"h-5 w-5 text-gray-500"}):e.jsx(S,{className:"h-5 w-5 text-gray-500"})]}),t==="transfer"&&e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Pilih Bank"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:g&&g.map(a=>e.jsxs("div",{onClick:()=>R(a),className:`p-3 border rounded-lg cursor-pointer flex items-center transition-all ${l&&l.id===a.id?"border-pink-500 bg-pink-50":"border-gray-200 hover:border-pink-200"}`,children:[a.logo?e.jsx("img",{src:a.logo,alt:a.name,className:"h-8 mr-3"}):e.jsx("div",{className:"p-1 bg-gray-100 rounded-md mr-3",children:e.jsx(P,{className:"h-6 w-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsx("p",{className:"text-xs text-gray-500",children:a.account_number})]})]},a.id))}),l&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Rekening Tujuan:"}),e.jsxs("div",{className:"space-y-1 mb-4",children:[e.jsxs("p",{children:["Bank: ",e.jsx("span",{className:"font-medium",children:l.name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("p",{className:"mr-2",children:["No. Rekening: ",e.jsx("span",{className:"font-medium font-mono",children:l.account_number})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),q(l.account_number)},className:"p-1 bg-gray-200 rounded-md hover:bg-gray-300 transition",children:$?e.jsx(C,{className:"h-4 w-4 text-green-600"}):e.jsx(Q,{className:"h-4 w-4 text-gray-600"})})]}),e.jsxs("p",{children:["Atas Nama: ",e.jsx("span",{className:"font-medium",children:l.account_name})]}),e.jsxs("p",{className:"mt-2",children:["Nominal Transfer: ",e.jsx("span",{className:"font-medium text-pink-600",children:m(r.amount)})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Unggah Bukti Pembayaran"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[e.jsx("input",{type:"file",id:"payment_proof",className:"hidden",accept:"image/*",onChange:V}),b?e.jsxs("div",{children:[e.jsx("img",{src:b,alt:"Preview",className:"max-h-48 mx-auto mb-3"}),e.jsx("button",{type:"button",onClick:()=>{p(null),i("payment_proof",null)},className:"text-red-500 text-sm hover:text-red-700",children:"Hapus Gambar"})]}):e.jsxs("label",{htmlFor:"payment_proof",className:"cursor-pointer block",children:[e.jsx("div",{className:"bg-gray-100 rounded-full h-12 w-12 flex items-center justify-center mx-auto mb-2",children:e.jsx("svg",{className:"h-6 w-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Klik untuk unggah bukti pembayaran"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Format: JPG, JPEG, PNG (Maks. 5MB)"})]})]}),u.payment_proof&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.payment_proof})]})]})]})]}),e.jsxs("div",{className:"mb-4 border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`flex justify-between items-center p-4 cursor-pointer ${t==="virtual_account"?"bg-pink-50 border-pink-500":"bg-white hover:bg-gray-50"}`,onClick:()=>k("virtual_account"),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-full mr-3 ${t==="virtual_account"?"bg-pink-100 text-pink-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(A,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Virtual Account"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pembayaran otomatis via Virtual Account"})]})]}),t==="virtual_account"?e.jsx(B,{className:"h-5 w-5 text-gray-500"}):e.jsx(S,{className:"h-5 w-5 text-gray-500"})]}),t==="virtual_account"&&e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Pilih Bank Virtual Account"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:h.map(a=>e.jsxs("div",{onClick:()=>i("bank_code",a.code),className:`p-3 border rounded-lg cursor-pointer flex items-center transition-all ${r.bank_code===a.code?"border-pink-500 bg-pink-50":"border-gray-200 hover:border-pink-200"}`,children:[a.logo?e.jsx("img",{src:a.logo,alt:a.name,className:"h-8 w-8 object-contain mr-3"}):e.jsx("div",{className:"p-1 bg-gray-100 rounded-md mr-3",children:e.jsx(A,{className:"h-6 w-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsx("p",{className:"text-xs text-gray-500",children:a.description})]})]},a.code))}),r.bank_code&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg flex items-start",children:[e.jsx(X,{className:"h-5 w-5 text-blue-500 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-700",children:"Informasi Virtual Account"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Setelah melanjutkan, Anda akan mendapatkan nomor Virtual Account yang harus dibayarkan. Pembayaran akan diverifikasi secara otomatis. Virtual Account akan aktif selama 24 jam."})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Cara Pembayaran ",((_=h.find(a=>a.code===r.bank_code))==null?void 0:_.fullName)||r.bank_code,":"]}),e.jsx("ol",{className:"list-decimal ml-5 text-sm space-y-1 text-gray-600",children:G(r.bank_code).map((a,n)=>e.jsx("li",{children:a},n))})]})]})]})]}),u.payment_method&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:u.payment_method}),u.bank_code&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:u.bank_code}),t&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Ringkasan Pembayaran"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Jenis Pembayaran"}),e.jsx("span",{className:"font-medium",children:c==="down_payment"?"Uang Muka":c==="installment"?"Cicilan":"Pelunasan"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Metode Pembayaran"}),e.jsx("span",{className:"font-medium",children:t==="transfer"?"Transfer Bank":"Virtual Account"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Jumlah"}),e.jsx("span",{className:"font-medium text-pink-600",children:m(r.amount)})]}),l&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bank"}),e.jsx("span",{className:"font-medium",children:l.name})]}),r.bank_code&&t==="virtual_account"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bank"}),e.jsx("span",{className:"font-medium",children:((w=h.find(a=>a.code===r.bank_code))==null?void 0:w.fullName)||r.bank_code})]})]})]})]}),e.jsx("div",{className:"p-6 bg-gray-50 border-t",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:route("orders"),className:"w-full",children:e.jsx("button",{className:"w-full px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Batalkan"})}),e.jsx("button",{onClick:J,disabled:!t||t==="transfer"&&(!l||!r.payment_proof)||t==="virtual_account"&&!r.bank_code||v||r.amount<=0,className:"w-full px-6 py-3 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Memproses...":"Lakukan Pembayaran"})]})})]})]})})})]})};export{de as default};
