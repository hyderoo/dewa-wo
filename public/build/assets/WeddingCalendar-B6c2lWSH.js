import{r as l,j as e,b as g}from"./app-Bs2T8Cel.js";import{C as M}from"./calendar-fqGNGd38.js";import{L as S}from"./loader-CpXI7Ybk.js";import"./createLucideIcon-CvzI4D8G.js";const $=()=>{const[s,m]=l.useState(new Date),[u,x]=l.useState([]),[p,i]=l.useState(!0),[h,d]=l.useState(null);l.useEffect(()=>{(async()=>{i(!0);try{const n=await g.get(route("api.booked-dates"));x(n.data.bookedDates),d(null)}catch(n){console.error("Error fetching booked dates:",n),d("Gagal memuat jadwal. Silakan coba lagi nanti.")}finally{i(!1)}})()},[]),l.useEffect(()=>{(async()=>{i(!0);const n=s.getFullYear(),r=s.getMonth()+1;try{const t=await g.get(route("api.monthly-availability",{year:n,month:r}));x(t.data.bookedDates),d(null)}catch(t){console.error("Error fetching monthly availability:",t),d("Gagal memuat jadwal. Silakan coba lagi nanti.")}finally{i(!1)}})()},[s]);const j=a=>{const n=a.getFullYear(),r=a.getMonth();return new Date(n,r+1,0).getDate()},f=a=>new Date(a.getFullYear(),a.getMonth(),1).getDay(),y=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],b=()=>{m(new Date(s.getFullYear(),s.getMonth()-1))},w=()=>{m(new Date(s.getFullYear(),s.getMonth()+1))},N=(a,n,r)=>{const t=`${a}-${String(n+1).padStart(2,"0")}-${String(r).padStart(2,"0")}`;return u.includes(t)},v=(a,n,r)=>{const t=new Date;return new Date(a,n,r)<new Date(t.getFullYear(),t.getMonth(),t.getDate())},k=()=>{const a=j(s),n=f(s),r=[];for(let t=0;t<n;t++)r.push(e.jsx("div",{className:"h-8 md:h-12 lg:h-16"},`empty-${t}`));for(let t=1;t<=a;t++){const o=N(s.getFullYear(),s.getMonth(),t),c=v(s.getFullYear(),s.getMonth(),t);r.push(e.jsxs("div",{className:`
                        h-8 md:h-12 lg:h-16 flex items-center justify-center rounded-lg
                        text-sm md:text-base lg:text-lg relative transition-colors
                        ${c?"bg-gray-100 text-gray-400":o?"bg-red-100":"bg-green-50 hover:bg-green-100"}
                        ${!c&&!o?"cursor-pointer":""}
                    `,onClick:()=>{if(!c&&!o){const D=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(t).padStart(2,"0")}`;console.log("Selected date:",D)}},children:[e.jsx("span",{className:"relative z-10",children:t}),o&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"text-xs md:text-sm text-red-600 font-medium",children:"Booked"})})]},t))}return r};return e.jsxs("div",{className:"w-full max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl mx-auto bg-white rounded-xl shadow-lg p-4 md:p-6 text-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"h-5 w-5 md:h-6 md:w-6 text-pink-600"}),e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800",children:"Jadwal Pernikahan"})]}),e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsx("button",{onClick:b,className:"p-1 md:p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("span",{className:"text-sm md:text-base font-medium text-gray-800",children:[y[s.getMonth()]," ",s.getFullYear()]}),e.jsx("button",{onClick:w,className:"p-1 md:p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),p?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(S,{className:"w-8 h-8 text-pink-600 animate-spin"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Memuat jadwal..."})]})}):h?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-500",children:h}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-pink-100 text-pink-600 rounded-md hover:bg-pink-200 transition-colors text-sm",children:"Coba Lagi"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Min","Sen","Sel","Rab","Kam","Jum","Sab"].map(a=>e.jsx("div",{className:"h-6 md:h-8 flex items-center justify-center font-medium text-gray-600 text-xs md:text-sm",children:a},a))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:k()})]}),e.jsxs("div",{className:"mt-4 md:mt-6 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 md:w-4 md:h-4 bg-gray-100 rounded"}),e.jsx("span",{className:"text-xs md:text-sm text-gray-600",children:"Tanggal Sudah Berlalu"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 md:w-4 md:h-4 bg-red-100 rounded"}),e.jsx("span",{className:"text-xs md:text-sm text-gray-600",children:"Tanggal Sudah Dipesan"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 md:w-4 md:h-4 bg-green-50 rounded"}),e.jsx("span",{className:"text-xs md:text-sm text-gray-600",children:"Tanggal Tersedia"})]})]})]})};export{$ as default};
